!function(t){"use strict";t.WS_Form.prototype.form_password_visibility_toggle=function(){var e=this;t("[data-wsf-password-visibility-toggle]:not([data-init-wsf-password-visibility-toggle])",this.form_canvas_obj).each(function(){t(this).on("click keydown",function(s){if("keydown"!==s.type||13===s.keyCode||32===s.keyCode){s.preventDefault();var a=e.get_field_wrapper(t(this)),i=t("input",a),r=i.attr("type"),o=e.get_field(i);switch(r){case"password":e.form_password_visibility_on(t(this),o,i);break;case"text":e.form_password_visibility_off(t(this),o,i)}}}),t(this).attr("data-init-wsf-password-visibility-toggle","")})},t.WS_Form.prototype.form_password_visibility_on=function(e,s,a){a.attr("type","text");var i=this.get_object_meta_value(s,"text_password_visibility_toggle_on","");""==i&&(i=this.language("password_visibility_toggle_on")),e.attr("title",i).attr("aria-live","polite").attr("aria-pressed","true"),t("g.wsf-password-visibility-off",e).hide(),t("g.wsf-password-visibility-on",e).show()},t.WS_Form.prototype.form_password_visibility_off=function(e,s,a){a.attr("type","password");var i=this.get_object_meta_value(s,"text_password_visibility_toggle_off","");""==i&&(i=this.language("password_visibility_toggle_off")),e.attr("title",i).attr("aria-live","polite").attr("aria-pressed","false"),t("g.wsf-password-visibility-off",e).show(),t("g.wsf-password-visibility-on",e).hide()},t.WS_Form.prototype.form_password_generate=function(){var e=this;t("[data-wsf-password-generate]:not([data-init-wsf-password-generate])",this.form_canvas_obj).each(function(){t(this).on("click keydown",function(s){if("keydown"!==s.type||13===s.keyCode||32===s.keyCode){s.preventDefault();var a=e.get_field_wrapper(t(this)),i=t("input",a),r=(i.attr("type"),e.get_field(i)),o=i.attr("max-length");o||(o=16),(o=parseInt(o,10))<1&&(o=16),i.val(e.generate_password(16)).trigger("change"),e.form_password_visibility_on(t("[data-wsf-password-visibility-toggle]",a),r,i)}}),t(this).attr("data-init-wsf-password-generate","")})},t.WS_Form.prototype.form_password_strength_meter=function(){var e=this;if("undefined"!=typeof wp&&void 0!==wp.passwordStrength&&void 0!==wp.passwordStrength.meter){var s=t("[data-password-strength-meter]:not([data-init-password-strength-meter])",this.form_canvas_obj);s.each(function(){t(this).attr("data-init-password-strength-meter","");var s=e.get_field_wrapper(t(this)),a=e.get_field_id(t(this)),i=e.get_section_repeatable_suffix(t(this)),r=e.get_invalid_feedback_obj(t(this)),o=e.get_field_value_fallback("password",!1,"class_help_post",[]).join(" "),_='<div id="'+e.esc_attr(e.form_id_prefix+"password-strength-meter-"+a+i)+'" class="'+e.esc_attr(o)+'"></div>';r.length?t(_).insertBefore(r):s.append(_),e.form_password_strength_meter_process(t(this))}),s.on("change keyup paste",function(){e.form_password_strength_meter_process(t(this))})}},t.WS_Form.prototype.form_password_strength_meter_process=function(e){var s=this.get_field_wrapper(e),a=this.get_field_id(e),i=this.get_section_repeatable_suffix(e),r=t("#"+this.form_id_prefix+"field-"+a+i,s).val(),o=t("#"+this.form_id_prefix+"password-strength-meter-"+a+i,s);if(!r)return o.html(""),e.attr("data-password-strength-meter",""),void this.set_invalid_feedback(e,"");var _=wp.passwordStrength.meter(r,wp.passwordStrength.userInputBlacklist(),r),d=this.get_framework_config_value("message","types");for(var n in d)d.hasOwnProperty(n)&&void 0!==d[n]&&void 0!==d[n].text_class&&o.removeClass(d[n].text_class);var p=this.field_data_cache[a];switch(_){case 2:n="danger";var f="bad";break;case 3:n="warning",f="good";break;case 4:n="success",f="strong";break;default:n="danger",f="short"}var l=this.get_object_meta_value(p,"text_password_strength_"+f,"");""==l&&(l=this.language("password_strength_"+f)),o.html(l).attr("aria-live","polite");var g=e.attr("data-password-strength-invalid");if(g){var h=this.get_object_meta_value(p,"text_password_strength_invalid","");""==h&&(h=this.language("password_strength_invalid"));var w=this.get_invalid_feedback(e);_<parseInt(g,10)?""===w&&this.set_invalid_feedback(e,h):w===h&&this.set_invalid_feedback(e,"")}e.attr("data-password-strength-meter",n),void 0!==d[n]&&void 0!==d[n].text_class&&o.addClass(d[n].text_class)},t.WS_Form.prototype.generate_password=function(t){void 0===t&&(t=16);for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()-_ []{}<>~`+=,.;:/?|",s="",a=0;a<t;++a)s+=e.charAt(Math.floor(Math.random()*e.length));return s}}(jQuery);