!function(r){"use strict";r.WS_Form.prototype.form_tracking=function(){var o=this.form_tracking_get_values();for(var e in o)if(o.hasOwnProperty(e)){var t=o[e];switch(t.client_source){case"geo_location":if(!navigator.geolocation)break;var a=this;navigator.geolocation.getCurrentPosition(function(r){var o=r.coords.latitude+","+r.coords.longitude;a.form_geo_location_process(o),a.log("log_tracking_geo_location",o,"tracking")},function(o){a.form_geo_location_process(o.code),a.error("error_tracking_geo_location",r.WS_Form.debug_rendered?a.form_geo_location_get_error(o):"","tracking")});continue;default:t.server_query_var&&this.form_add_hidden_input(t.server_query_var,t.value)}}},r.WS_Form.prototype.form_tracking_get_values=function(){var o=[];for(var e in r.WS_Form.tracking)if(r.WS_Form.tracking.hasOwnProperty(e)){var t=r.WS_Form.tracking[e];if(this.get_object_meta_value(this.form,e,!1)){var a=void 0!==t.server_query_var&&t.server_query_var;if(void 0!==t.client_source){var i=t.client_source;switch(i){case"geo_location":var n="";break;default:if(!1===(n=this.form_tracking_get_value(t)))continue}o.push({id:e,client_source:i,server_query_var:a,value:n})}}}return o},r.WS_Form.prototype.form_tracking_get_value=function(r){if(void 0===r.client_source)return!1;switch(r.client_source){case"query_var":if(void 0===r.client_query_var)return!1;var o=r.client_query_var;return this.get_query_var(o);case"referrer":return void 0!==document.referrer?document.referrer:"";case"href":return void 0!==location.href?location.href:"";case"hostname":return void 0!==location.hostname?location.hostname:"";case"pathname":return void 0!==location.pathname?location.pathname:"";case"query_string":return void 0!==location.search?location.search:"";case"hash":return void 0!==location.hash?location.hash:"";case"os":if(void 0===window.navigator)break;return void 0!==window.navigator.platform?window.navigator.platform:"";case"agent":if(void 0===window.navigator)break;return void 0!==window.navigator.userAgent?window.navigator.userAgent:""}return!1},r.WS_Form.prototype.form_geo_location_process=function(r){this.form_add_hidden_input("wsf_geo_location",r)},r.WS_Form.prototype.form_geo_location_get_error=function(r){switch(r.code){case r.PERMISSION_DENIED:return this.language("debug_tracking_geo_location_permission_denied");case r.POSITION_UNAVAILABLE:return this.language("debug_tracking_geo_location_position_unavailable");case r.TIMEOUT:return this.language("debug_tracking_geo_location_timeout");default:return this.language("debug_tracking_geo_location_default")}}}(jQuery);